<div style="height: 50px">
</div>
<table class="theTable">
  <tr>
    <td id=0></td>
    <td id=1></td>
    <td id=2></td>
  </tr>
  <tr>
    <td id=3></td>
    <td id=4></td>
    <td id=5></td>
  </tr>
  <tr>
    <td id=6></td>
    <td id=7></td>
    <td id=8></td>
  </tr>
</table>

<div style="height: 50px"></div>

<div class="testing" id="theFormDiv">
  <form action='/gameHasStarted' style="text-align: center">
      <div class="form-group">
        <label for="sender">Enter number for next value</label>
        <input id="numberFromForm" name="numberFromForm" class="form-control inputBox" type="number" min="1" max="9" autofocus>
      </div>
      <button id="theButton" type="submit" class="btn">Choose this number</button>
      <br />
      <br />
      <a href="/newGame" style="text-align: center">Restart</a>
  </form>
</div>

<script>
  //Here we fetch the input we send into the file
  var str = "$newString";
  var computerTurn = "$computerMove";
  var resultOfTheGame = "$resultOfTheGame";

  //Make the form disappear while the computer makes his move
  var form = document.getElementById("theFormDiv");
  form.style.display = "none";
  //Check if there is a winner
  if (resultOfTheGame == 'X' || resultOfTheGame == 'O'){
    form.innerHTML = "And the winner is: " + resultOfTheGame + "<br />" + "<br />" + 
    "<a href=\"/newGame\">Restart</a>";
    form.style.textAlign = "center";
  }
  //Check if there is a draw
  if (resultOfTheGame == 'd'){
    form.innerHTML = "ItÂ´s a draw" + "<br />" + "<br />" + 
    "<a href=\"/newGame\">Restart</a>";
    form.style.textAlign = "center";
  }

  //Put the values from the string we sent in to the right table cell
  var one = document.getElementById(0);
  one.innerHTML = str[0];
  var two = document.getElementById(1);
  two.innerHTML = str[1];
  var three = document.getElementById(2);
  three.innerHTML = str[2];
  var four = document.getElementById(3);
  four.innerHTML = str[3];
  var five = document.getElementById(4);
  five.innerHTML = str[4];
  var six = document.getElementById(5);
  six.innerHTML = str[5];
  var seven = document.getElementById(6);
  seven.innerHTML = str[6];
  var eight = document.getElementById(7);
  eight.innerHTML = str[7];
  var nine = document.getElementById(8);
  nine.innerHTML = str[8];

  changeCSS(one.innerHTML, one);
  changeCSS(two.innerHTML, two);
  changeCSS(three.innerHTML, three);
  changeCSS(four.innerHTML, four);
  changeCSS(five.innerHTML, five);
  changeCSS(six.innerHTML, six);
  changeCSS(seven.innerHTML, seven);
  changeCSS(eight.innerHTML, eight);
  changeCSS(nine.innerHTML, nine);

  //We set a delay on the computers turn to let the computer make his move
  setTimeout("makeComputerTurn()", 500);

  //Find the digit that was not sent in as O in $newString and make it O
  function makeComputerTurn(){
    for (var i = 0; i < computerTurn.length; i++){
      if (computerTurn[i] == 'O'){
        var number = document.getElementById(i);
        number.innerHTML = 'O';
        changeCSS(number.innerHTML, number);
      }
    }
    //Display the form again so the user can make his move
    form.style.display = "block";
  }

  //Change the css if a cell is X or O to make it look nicer
  function changeCSS(someNumber, someVariable) {
    if (someNumber == 'X') {
      someVariable.style.backgroundColor = "#2289ff";
      someVariable.style.fontSize = "29px";
    }

    if (someNumber == 'O'){
      someVariable.style.backgroundColor = "red";
      someVariable.style.fontSize = "29px";
    }
  }

</script>


